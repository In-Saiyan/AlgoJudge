# =============================================================================
# Olympus Environment Configuration
# =============================================================================
# Copy this file to .env and customize for your environment

# =============================================================================
# Infrastructure
# =============================================================================

# PostgreSQL
POSTGRES_PORT=5432
DATABASE_URL=postgres://olympus:olympus_dev@localhost:5432/olympus

# Redis
REDIS_PORT=6379
REDIS_URL=redis://localhost:6379

# =============================================================================
# API Gateway (Vanguard)
# =============================================================================

API_PORT=8080
JWT_SECRET=change-this-in-production
JWT_ACCESS_EXPIRATION=604800       # 7 days (in seconds)
JWT_REFRESH_EXPIRATION=604800   # 7 days (in seconds)

# =============================================================================
# Compiler Service (Sisyphus)
# =============================================================================

# Set to "true" to allow network during compilation (NOT recommended for production)
NETWORK_ENABLED=false
COMPILATION_TIMEOUT_SECS=30
MAX_RETRIES=3

# Docker API version â€” must match or exceed the daemon's minimum supported version
DOCKER_API_VERSION=1.44

# Host-side path of the shared data volume (named volume mount point).
# Required for Docker-out-of-Docker bind-mounts to work.
# Find it with: docker volume inspect <volume_name> --format '{{.Mountpoint}}'
DOCKER_HOST_DATA_PATH=/var/lib/docker/volumes/algojudge_olympus_data/_data

# =============================================================================
# Judge Service (Minos)
# =============================================================================

MINOS_METRICS_PORT=9091
DEFAULT_TIME_LIMIT_MS=2000
DEFAULT_MEMORY_LIMIT_KB=262144
MAX_TIME_LIMIT_MS=30000
MAX_MEMORY_LIMIT_KB=1048576

# =============================================================================
# Cleaner Service (Horus)
# =============================================================================

TESTCASE_STALE_HOURS=6
TEMP_ORPHAN_HOURS=1
SUBMISSION_RETENTION_DAYS=0

# =============================================================================
# Monitoring
# =============================================================================

PROMETHEUS_PORT=9090
GRAFANA_PORT=3001

# =============================================================================
# Storage
# =============================================================================

STORAGE_BASE_PATH=/mnt/data

# =============================================================================
# Environment
# =============================================================================

ENVIRONMENT=development
RUST_LOG=info,sqlx=warn
